<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Routing | Express.js Documentation</title>
  <!-- Tailwind CSS via CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen flex flex-col">
  <!-- Header will be inserted here by JavaScript -->
  <div id="header"></div>
  
  <main class="container mx-auto px-4 py-8 flex-grow">
    <div class="max-w-4xl mx-auto bg-white rounded-lg shadow-lg p-8">
      <h1 class="text-3xl font-bold mb-6 text-gray-800 border-b pb-4">Express.js Routing</h1>
      
      <section class="mb-8">
        <h2 class="text-2xl font-semibold mb-4 text-gray-700">Basic Routing</h2>
        <p class="mb-4 text-gray-600 leading-relaxed">
          Routing refers to determining how an application responds to a client request to a specific endpoint, which is a URI (or path) and a specific HTTP request method (GET, POST, etc.).
        </p>
        <p class="mb-4 text-gray-600 leading-relaxed">
          Each route can have one or more handler functions, which are executed when the route is matched.
        </p>
        <div class="bg-gray-800 text-white p-4 rounded-md mb-4 overflow-x-auto">
          <code>
            app.METHOD(PATH, HANDLER)
          </code>
        </div>
        <p class="mb-4 text-gray-600 leading-relaxed">
          Where:
        </p>
        <ul class="list-disc pl-6 space-y-2 text-gray-600 mb-4">
          <li><code class="bg-gray-200 px-1 py-0.5 rounded">app</code> is an instance of express.</li>
          <li><code class="bg-gray-200 px-1 py-0.5 rounded">METHOD</code> is an HTTP request method, in lowercase.</li>
          <li><code class="bg-gray-200 px-1 py-0.5 rounded">PATH</code> is a path on the server.</li>
          <li><code class="bg-gray-200 px-1 py-0.5 rounded">HANDLER</code> is the function executed when the route is matched.</li>
        </ul>

        <div class="bg-gray-800 text-white p-4 rounded-md mb-4 overflow-x-auto">
          <code>
            // Respond with "Hello World" when a GET request is made to the homepage<br>
            app.get('/', (req, res) => {<br>
            &nbsp;&nbsp;res.send('Hello World');<br>
            });<br>
            <br>
            // Respond to POST request on the root route (/), the application's home page<br>
            app.post('/', (req, res) => {<br>
            &nbsp;&nbsp;res.send('Got a POST request');<br>
            });<br>
            <br>
            // Respond to a PUT request to the /user route<br>
            app.put('/user', (req, res) => {<br>
            &nbsp;&nbsp;res.send('Got a PUT request at /user');<br>
            });<br>
            <br>
            // Respond to a DELETE request to the /user route<br>
            app.delete('/user', (req, res) => {<br>
            &nbsp;&nbsp;res.send('Got a DELETE request at /user');<br>
            });
          </code>
        </div>
      </section>

      <section class="mb-8">
        <h2 class="text-2xl font-semibold mb-4 text-gray-700">Route Parameters</h2>
        <p class="mb-4 text-gray-600 leading-relaxed">
          Route parameters are named URL segments that are used to capture the values specified at their position in the URL. The captured values are populated in the <code class="bg-gray-200 px-1 py-0.5 rounded">req.params</code> object, with the name of the route parameter specified in the path as their respective keys.
        </p>
        <div class="bg-gray-800 text-white p-4 rounded-md mb-4 overflow-x-auto">
          <code>
            // Route path: /users/:userId/books/:bookId<br>
            // Request URL: http://localhost:3000/users/34/books/8989<br>
            // req.params: { "userId": "34", "bookId": "8989" }<br>
            <br>
            app.get('/users/:userId/books/:bookId', (req, res) => {<br>
            &nbsp;&nbsp;res.send(req.params);<br>
            });
          </code>
        </div>
      </section>

      <section class="mb-8">
        <h2 class="text-2xl font-semibold mb-4 text-gray-700">Query Parameters</h2>
        <p class="mb-4 text-gray-600 leading-relaxed">
          Query parameters are used to provide additional data to the server through the URL. In Express, they're accessible through <code class="bg-gray-200 px-1 py-0.5 rounded">req.query</code>.
        </p>
        <div class="bg-gray-800 text-white p-4 rounded-md mb-4 overflow-x-auto">
          <code>
            // Request URL: http://localhost:3000/search?q=express&sort=name<br>
            // req.query: { "q": "express", "sort": "name" }<br>
            <br>
            app.get('/search', (req, res) => {<br>
            &nbsp;&nbsp;const query = req.query.q;<br>
            &nbsp;&nbsp;const sortBy = req.query.sort;<br>
            &nbsp;&nbsp;res.send(`Search for: ${query}, Sort by: ${sortBy}`);<br>
            });
          </code>
        </div>
      </section>

      <section class="mb-8">
        <h2 class="text-2xl font-semibold mb-4 text-gray-700">Route Handlers</h2>
        <p class="mb-4 text-gray-600 leading-relaxed">
          You can provide multiple callback functions that behave like middleware to handle a request. These callbacks can:
        </p>
        <ul class="list-disc pl-6 space-y-2 text-gray-600 mb-4">
          <li>Execute any code</li>
          <li>Make changes to the request and the response objects</li>
          <li>End the request-response cycle</li>
          <li>Call the next middleware in the stack</li>
        </ul>
        <div class="bg-gray-800 text-white p-4 rounded-md mb-4 overflow-x-auto">
          <code>
            // Multiple route handlers for a single route<br>
            app.get('/example/b', (req, res, next) => {<br>
            &nbsp;&nbsp;console.log('The response will be sent by the next function...');<br>
            &nbsp;&nbsp;next();<br>
            }, (req, res) => {<br>
            &nbsp;&nbsp;res.send('Hello from B!');<br>
            });
          </code>
        </div>
      </section>

      <section class="mb-8">
        <h2 class="text-2xl font-semibold mb-4 text-gray-700">Express Router</h2>
        <p class="mb-4 text-gray-600 leading-relaxed">
          The <code class="bg-gray-200 px-1 py-0.5 rounded">express.Router</code> class is used to create modular, mountable route handlers. A Router instance is a complete middleware and routing system; for this reason, it's often referred to as a "mini-app".
        </p>
        <div class="bg-gray-800 text-white p-4 rounded-md mb-4 overflow-x-auto">
          <code>
            // birds.js<br>
            const express = require('express');<br>
            const router = express.Router();<br>
            <br>
            // middleware specific to this router<br>
            router.use((req, res, next) => {<br>
            &nbsp;&nbsp;console.log('Time: ', Date.now());<br>
            &nbsp;&nbsp;next();<br>
            });<br>
            <br>
            // define the home page route<br>
            router.get('/', (req, res) => {<br>
            &nbsp;&nbsp;res.send('Birds home page');<br>
            });<br>
            <br>
            // define the about route<br>
            router.get('/about', (req, res) => {<br>
            &nbsp;&nbsp;res.send('About birds');<br>
            });<br>
            <br>
            module.exports = router;
          </code>
        </div>
        <p class="mb-4 text-gray-600 leading-relaxed">
          Then, in your main app file:
        </p>
        <div class="bg-gray-800 text-white p-4 rounded-md mb-4 overflow-x-auto">
          <code>
            const birds = require('./birds');<br>
            <br>
            // ...<br>
            app.use('/birds', birds);<br>
            // ...
          </code>
        </div>
        <p class="mb-4 text-gray-600 leading-relaxed">
          This will make the router handle paths prefixed with '/birds', so the routes defined in birds.js will be accessible at '/birds' and '/birds/about'.
        </p>
      </section>
    </div>
  </main>
  
  <!-- Footer will be inserted here by JavaScript -->
  <div id="footer"></div>
  
  <!-- Common JavaScript for header and footer -->
  <script src="../js/common.js"></script>
</body>
</html>
