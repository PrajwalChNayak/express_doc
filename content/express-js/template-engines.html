<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Template Engines - Express.js Documentation</title>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css"
      rel="stylesheet"
      media="(prefers-color-scheme: dark)"
    />
  </head>
  <body>
    <div class="max-w-4xl mx-auto px-4 py-8">
      <div class="bg-blue-50 dark:bg-blue-900/20 rounded-lg p-6 mb-8">
        <h1 class="text-3xl font-bold text-blue-900 dark:text-blue-100 mb-4">
          Template Engines in Express.js
        </h1>
        <p class="text-blue-800 dark:text-blue-200 text-lg">
          Learn how to use template engines to generate dynamic HTML content,
          work with different templating systems, and implement server-side
          rendering in Express.js applications.
        </p>
      </div>

      <!-- What are Template Engines -->
      <section class="mb-8">
        <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-4">
          What are Template Engines?
        </h2>

        <div
          class="bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700 mb-6"
        >
          <p class="text-gray-700 dark:text-gray-300 mb-4">
            Template engines enable you to use static template files in your
            application. At runtime, the template engine replaces variables in a
            template file with actual values and transforms the template into an
            HTML file sent to the client.
          </p>

          <div
            class="bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4 mb-4"
          >
            <h4 class="font-semibold text-green-800 dark:text-green-200 mb-2">
              Benefits of Template Engines:
            </h4>
            <ul class="text-green-700 dark:text-green-300 space-y-1">
              <li>
                • <strong>Dynamic Content:</strong> Generate HTML with dynamic
                data
              </li>
              <li>
                • <strong>Code Reusability:</strong> Use layouts and partials
              </li>
              <li>
                • <strong>Logic in Templates:</strong> Conditionals and loops
              </li>
              <li>
                • <strong>Data Binding:</strong> Easy variable interpolation
              </li>
              <li>
                • <strong>Performance:</strong> Server-side rendering for SEO
              </li>
            </ul>
          </div>

          <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4">
            <pre><code class="language-javascript">// Basic template engine flow
app.get('/', (req, res) => {
    const data = {
        title: 'Welcome',
        users: ['Alice', 'Bob', 'Charlie']
    };
    res.render('index', data); // Template + Data = HTML
});</code></pre>
          </div>
        </div>
      </section>

      <!-- Popular Template Engines -->
      <section class="mb-8">
        <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-4">
          Popular Template Engines
        </h2>

        <div class="grid md:grid-cols-2 gap-6 mb-6">
          <!-- EJS -->
          <div
            class="bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700"
          >
            <div class="flex items-center mb-3">
              <div class="w-3 h-3 bg-yellow-500 rounded-full mr-3"></div>
              <h3 class="text-xl font-semibold text-gray-900 dark:text-white">
                EJS (Embedded JavaScript)
              </h3>
            </div>
            <p class="text-gray-600 dark:text-gray-400 mb-3">
              Simple templating language that lets you generate HTML with plain
              JavaScript.
            </p>
            <div class="bg-gray-50 dark:bg-gray-700 rounded p-3 text-sm">
              <code
                >&lt;% if (user) { %&gt;<br />
                &nbsp;&nbsp;&lt;h1&gt;Hello &lt;%= user.name %&gt;&lt;/h1&gt;<br />
                &lt;% } %&gt;</code
              >
            </div>
          </div>

          <!-- Handlebars -->
          <div
            class="bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700"
          >
            <div class="flex items-center mb-3">
              <div class="w-3 h-3 bg-orange-500 rounded-full mr-3"></div>
              <h3 class="text-xl font-semibold text-gray-900 dark:text-white">
                Handlebars
              </h3>
            </div>
            <p class="text-gray-600 dark:text-gray-400 mb-3">
              Logic-less templating language with powerful helpers and built-in
              block helpers.
            </p>
            <div class="bg-gray-50 dark:bg-gray-700 rounded p-3 text-sm">
              <code
                >{{#if user}}<br />
                &nbsp;&nbsp;&lt;h1&gt;Hello {{user.name}}&lt;/h1&gt;<br />
                {{/if}}</code
              >
            </div>
          </div>

          <!-- Pug -->
          <div
            class="bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700"
          >
            <div class="flex items-center mb-3">
              <div class="w-3 h-3 bg-green-500 rounded-full mr-3"></div>
              <h3 class="text-xl font-semibold text-gray-900 dark:text-white">
                Pug (formerly Jade)
              </h3>
            </div>
            <p class="text-gray-600 dark:text-gray-400 mb-3">
              Clean, whitespace-sensitive syntax for writing HTML.
            </p>
            <div class="bg-gray-50 dark:bg-gray-700 rounded p-3 text-sm">
              <code
                >if user<br />
                &nbsp;&nbsp;h1 Hello #{user.name}</code
              >
            </div>
          </div>

          <!-- Mustache -->
          <div
            class="bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700"
          >
            <div class="flex items-center mb-3">
              <div class="w-3 h-3 bg-blue-500 rounded-full mr-3"></div>
              <h3 class="text-xl font-semibold text-gray-900 dark:text-white">
                Mustache
              </h3>
            </div>
            <p class="text-gray-600 dark:text-gray-400 mb-3">
              Logic-less templates that work in JavaScript, Ruby, Python, and
              more.
            </p>
            <div class="bg-gray-50 dark:bg-gray-700 rounded p-3 text-sm">
              <code
                >{{#user}}<br />
                &nbsp;&nbsp;&lt;h1&gt;Hello {{name}}&lt;/h1&gt;<br />
                {{/user}}</code
              >
            </div>
          </div>
        </div>
      </section>

      <!-- Setting Up Template Engines -->
      <section class="mb-8">
        <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-4">
          Setting Up Template Engines
        </h2>

        <!-- Tab Navigation -->
        <div class="border-b border-gray-200 dark:border-gray-700 mb-6">
          <nav class="-mb-px flex space-x-8">
            <button
              class="template-tab py-2 px-1 border-b-2 border-blue-500 text-blue-600 dark:text-blue-400 font-medium text-sm"
              data-tab="ejs"
            >
              EJS Setup
            </button>
            <button
              class="template-tab py-2 px-1 border-b-2 border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300 font-medium text-sm"
              data-tab="handlebars"
            >
              Handlebars Setup
            </button>
            <button
              class="template-tab py-2 px-1 border-b-2 border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300 font-medium text-sm"
              data-tab="pug"
            >
              Pug Setup
            </button>
          </nav>
        </div>

        <!-- EJS Tab -->
        <div
          id="ejs"
          class="template-content bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700"
        >
          <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-4">
            EJS (Embedded JavaScript)
          </h3>

          <div class="space-y-4">
            <div>
              <h4 class="font-medium text-gray-900 dark:text-white mb-2">
                1. Installation
              </h4>
              <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4">
                <pre><code class="language-bash">npm install ejs</code></pre>
              </div>
            </div>

            <div>
              <h4 class="font-medium text-gray-900 dark:text-white mb-2">
                2. Configuration
              </h4>
              <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4">
                <pre><code class="language-javascript">const express = require('express');
const app = express();

// Set EJS as template engine
app.set('view engine', 'ejs');
app.set('views', './views'); // Views directory

// Optional: Configure EJS options
app.set('view options', {
    delimiter: '%', // Default delimiter
    openDelimiter: '<',
    closeDelimiter: '>',
    cache: process.env.NODE_ENV === 'production'
});</code></pre>
              </div>
            </div>

            <div>
              <h4 class="font-medium text-gray-900 dark:text-white mb-2">
                3. Basic Template (views/index.ejs)
              </h4>
              <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4">
                <pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;&lt;%= title %&gt;&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;&lt;%= heading %&gt;&lt;/h1&gt;
    
    &lt;% if (users.length > 0) { %&gt;
        &lt;ul&gt;
            &lt;% users.forEach(user => { %&gt;
                &lt;li&gt;&lt;%= user.name %&gt; - &lt;%= user.email %&gt;&lt;/li&gt;
            &lt;% }); %&gt;
        &lt;/ul&gt;
    &lt;% } else { %&gt;
        &lt;p&gt;No users found.&lt;/p&gt;
    &lt;% } %&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
              </div>
            </div>

            <div>
              <h4 class="font-medium text-gray-900 dark:text-white mb-2">
                4. Rendering Template
              </h4>
              <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4">
                <pre><code class="language-javascript">app.get('/', (req, res) => {
    const data = {
        title: 'My App',
        heading: 'Welcome to My App',
        users: [
            { name: 'John', email: 'john@example.com' },
            { name: 'Jane', email: 'jane@example.com' }
        ]
    };
    res.render('index', data);
});</code></pre>
              </div>
            </div>
          </div>
        </div>

        <!-- Handlebars Tab -->
        <div
          id="handlebars"
          class="template-content bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700 hidden"
        >
          <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-4">
            Handlebars
          </h3>

          <div class="space-y-4">
            <div>
              <h4 class="font-medium text-gray-900 dark:text-white mb-2">
                1. Installation
              </h4>
              <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4">
                <pre><code class="language-bash">npm install express-handlebars</code></pre>
              </div>
            </div>

            <div>
              <h4 class="font-medium text-gray-900 dark:text-white mb-2">
                2. Configuration
              </h4>
              <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4">
                <pre><code class="language-javascript">const express = require('express');
const { engine } = require('express-handlebars');
const app = express();

// Configure Handlebars
app.engine('handlebars', engine({
    defaultLayout: 'main',
    layoutsDir: './views/layouts',
    partialsDir: './views/partials',
    helpers: {
        // Custom helpers
        formatDate: (date) => {
            return new Date(date).toLocaleDateString();
        },
        eq: (a, b) => a === b
    }
}));

app.set('view engine', 'handlebars');
app.set('views', './views');</code></pre>
              </div>
            </div>

            <div>
              <h4 class="font-medium text-gray-900 dark:text-white mb-2">
                3. Layout Template (views/layouts/main.handlebars)
              </h4>
              <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4">
                <pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;{{title}}&lt;/title&gt;
    &lt;link rel="stylesheet" href="/css/style.css"&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;header&gt;
        {{&gt; navbar}}
    &lt;/header&gt;
    
    &lt;main&gt;
        {{{body}}}
    &lt;/main&gt;
    
    &lt;footer&gt;
        {{&gt; footer}}
    &lt;/footer&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
              </div>
            </div>

            <div>
              <h4 class="font-medium text-gray-900 dark:text-white mb-2">
                4. Page Template (views/users.handlebars)
              </h4>
              <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4">
                <pre><code class="language-html">&lt;h1&gt;{{pageTitle}}&lt;/h1&gt;

{{#if users}}
    &lt;div class="user-list"&gt;
        {{#each users}}
            &lt;div class="user-card"&gt;
                &lt;h3&gt;{{name}}&lt;/h3&gt;
                &lt;p&gt;{{email}}&lt;/p&gt;
                &lt;p&gt;Joined: {{formatDate createdAt}}&lt;/p&gt;
                {{#if (eq role 'admin')}}
                    &lt;span class="badge"&gt;Admin&lt;/span&gt;
                {{/if}}
            &lt;/div&gt;
        {{/each}}
    &lt;/div&gt;
{{else}}
    &lt;p&gt;No users found.&lt;/p&gt;
{{/if}}</code></pre>
              </div>
            </div>
          </div>
        </div>

        <!-- Pug Tab -->
        <div
          id="pug"
          class="template-content bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700 hidden"
        >
          <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-4">
            Pug
          </h3>

          <div class="space-y-4">
            <div>
              <h4 class="font-medium text-gray-900 dark:text-white mb-2">
                1. Installation
              </h4>
              <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4">
                <pre><code class="language-bash">npm install pug</code></pre>
              </div>
            </div>

            <div>
              <h4 class="font-medium text-gray-900 dark:text-white mb-2">
                2. Configuration
              </h4>
              <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4">
                <pre><code class="language-javascript">const express = require('express');
const app = express();

// Set Pug as template engine
app.set('view engine', 'pug');
app.set('views', './views');

// Optional: Configure Pug options
app.locals.pretty = process.env.NODE_ENV !== 'production';</code></pre>
              </div>
            </div>

            <div>
              <h4 class="font-medium text-gray-900 dark:text-white mb-2">
                3. Layout Template (views/layout.pug)
              </h4>
              <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4">
                <pre><code class="language-pug">doctype html
html
  head
    title= title
    link(rel='stylesheet', href='/css/style.css')
  body
    header
      include partials/navbar
    
    main
      block content
    
    footer
      include partials/footer</code></pre>
              </div>
            </div>

            <div>
              <h4 class="font-medium text-gray-900 dark:text-white mb-2">
                4. Page Template (views/users.pug)
              </h4>
              <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4">
                <pre><code class="language-pug">extends layout

block content
  h1= pageTitle
  
  if users && users.length
    .user-list
      each user in users
        .user-card
          h3= user.name
          p= user.email
          p Joined: #{user.createdAt.toLocaleDateString()}
          if user.role === 'admin'
            span.badge Admin
  else
    p No users found.</code></pre>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Advanced Features -->
      <section class="mb-8">
        <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-4">
          Advanced Template Features
        </h2>

        <div class="space-y-6">
          <!-- Layouts and Partials -->
          <div
            class="bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700"
          >
            <button
              class="w-full flex justify-between items-center text-left"
              onclick="toggleSection('layouts')"
            >
              <h3 class="text-xl font-semibold text-gray-900 dark:text-white">
                Layouts and Partials
              </h3>
              <svg
                id="layouts-icon"
                class="w-5 h-5 text-gray-500 transform transition-transform"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M19 9l-7 7-7-7"
                ></path>
              </svg>
            </button>

            <div id="layouts-content" class="mt-4">
              <p class="text-gray-600 dark:text-gray-400 mb-4">
                Layouts and partials help you create reusable template
                components and maintain consistent page structure.
              </p>

              <div class="grid md:grid-cols-2 gap-4">
                <div>
                  <h4 class="font-medium text-gray-900 dark:text-white mb-2">
                    EJS Partials
                  </h4>
                  <div class="bg-gray-50 dark:bg-gray-700 rounded p-3 text-sm">
                    <pre><code class="language-html">&lt;!-- views/partials/header.ejs --&gt;
&lt;header&gt;
  &lt;nav&gt;
    &lt;a href="/"&gt;Home&lt;/a&gt;
    &lt;a href="/about"&gt;About&lt;/a&gt;
  &lt;/nav&gt;
&lt;/header&gt;

&lt;!-- In main template --&gt;
&lt;%- include('partials/header') %&gt;</code></pre>
                  </div>
                </div>

                <div>
                  <h4 class="font-medium text-gray-900 dark:text-white mb-2">
                    Handlebars Partials
                  </h4>
                  <div class="bg-gray-50 dark:bg-gray-700 rounded p-3 text-sm">
                    <pre><code class="language-html">&lt;!-- views/partials/navbar.handlebars --&gt;
&lt;nav&gt;
  &lt;a href="/"&gt;Home&lt;/a&gt;
  &lt;a href="/about"&gt;About&lt;/a&gt;
&lt;/nav&gt;

&lt;!-- In template --&gt;
{{&gt; navbar}}</code></pre>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Template Helpers -->
          <div
            class="bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700"
          >
            <button
              class="w-full flex justify-between items-center text-left"
              onclick="toggleSection('helpers')"
            >
              <h3 class="text-xl font-semibold text-gray-900 dark:text-white">
                Template Helpers and Filters
              </h3>
              <svg
                id="helpers-icon"
                class="w-5 h-5 text-gray-500 transform transition-transform"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M19 9l-7 7-7-7"
                ></path>
              </svg>
            </button>

            <div id="helpers-content" class="mt-4 hidden">
              <div class="space-y-4">
                <div>
                  <h4 class="font-medium text-gray-900 dark:text-white mb-2">
                    Custom Handlebars Helpers
                  </h4>
                  <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4">
                    <pre><code class="language-javascript">// Register custom helpers
app.engine('handlebars', engine({
    helpers: {
        // Date formatting
        formatDate: (date, format) => {
            const options = format === 'short' ? 
                { month: 'short', day: 'numeric', year: 'numeric' } :
                { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            return new Date(date).toLocaleDateString('en-US', options);
        },
        
        // Conditional helpers
        eq: (a, b) => a === b,
        gt: (a, b) => a > b,
        lt: (a, b) => a < b,
        
        // String helpers
        truncate: (str, length) => {
            return str.length > length ? str.substr(0, length) + '...' : str;
        },
        
        // Array helpers
        slice: (array, start, end) => array.slice(start, end),
        
        // JSON helper
        json: (obj) => JSON.stringify(obj)
    }
}));</code></pre>
                  </div>
                </div>

                <div>
                  <h4 class="font-medium text-gray-900 dark:text-white mb-2">
                    Using Helpers in Templates
                  </h4>
                  <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4">
                    <pre><code class="language-html">&lt;!-- Date formatting --&gt;
&lt;p&gt;Published: {{formatDate publishedAt 'short'}}&lt;/p&gt;

&lt;!-- Conditional rendering --&gt;
{{#if (gt user.age 18)}}
    &lt;p&gt;Adult user&lt;/p&gt;
{{/if}}

&lt;!-- String manipulation --&gt;
&lt;p&gt;{{truncate description 100}}&lt;/p&gt;

&lt;!-- Array slicing --&gt;
{{#each (slice articles 0 3)}}
    &lt;article&gt;{{title}}&lt;/article&gt;
{{/each}}</code></pre>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Data Passing -->
          <div
            class="bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700"
          >
            <button
              class="w-full flex justify-between items-center text-left"
              onclick="toggleSection('data-passing')"
            >
              <h3 class="text-xl font-semibold text-gray-900 dark:text-white">
                Data Passing and Context
              </h3>
              <svg
                id="data-passing-icon"
                class="w-5 h-5 text-gray-500 transform transition-transform"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M19 9l-7 7-7-7"
                ></path>
              </svg>
            </button>

            <div id="data-passing-content" class="mt-4 hidden">
              <div class="space-y-4">
                <div>
                  <h4 class="font-medium text-gray-900 dark:text-white mb-2">
                    Global Variables with app.locals
                  </h4>
                  <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4">
                    <pre><code class="language-javascript">// Set global variables
app.locals.appName = 'My Express App';
app.locals.version = '1.0.0';
app.locals.currentYear = new Date().getFullYear();

// Available in all templates
// {{appName}} - "My Express App"
// {{version}} - "1.0.0"
// {{currentYear}} - 2024</code></pre>
                  </div>
                </div>

                <div>
                  <h4 class="font-medium text-gray-900 dark:text-white mb-2">
                    Request-specific Data with res.locals
                  </h4>
                  <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4">
                    <pre><code class="language-javascript">// Middleware to set user data
app.use((req, res, next) => {
    res.locals.user = req.user || null;
    res.locals.isLoggedIn = !!req.user;
    res.locals.currentPath = req.path;
    next();
});

// Route-specific data
app.get('/profile', (req, res) => {
    res.locals.pageTitle = 'User Profile';
    res.locals.breadcrumbs = [
        { text: 'Home', url: '/' },
        { text: 'Profile', url: '/profile' }
    ];
    res.render('profile');
});</code></pre>
                  </div>
                </div>

                <div>
                  <h4 class="font-medium text-gray-900 dark:text-white mb-2">
                    Complex Data Structures
                  </h4>
                  <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4">
                    <pre><code class="language-javascript">app.get('/dashboard', async (req, res) => {
    try {
        const data = {
            user: {
                name: req.user.name,
                avatar: req.user.avatar,
                role: req.user.role
            },
            stats: {
                totalUsers: await User.count(),
                totalPosts: await Post.count(),
                recentActivity: await Activity.find().limit(10)
            },
            notifications: await Notification.find({ userId: req.user.id }),
            menu: [
                { text: 'Dashboard', url: '/dashboard', active: true },
                { text: 'Users', url: '/users', active: false },
                { text: 'Settings', url: '/settings', active: false }
            ]
        };
        
        res.render('dashboard', data);
    } catch (error) {
        res.status(500).render('error', { error });
    }
});</code></pre>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Best Practices -->
      <section class="mb-8">
        <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-4">
          Best Practices
        </h2>

        <div class="grid md:grid-cols-2 gap-6">
          <div class="space-y-4">
            <div
              class="bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4"
            >
              <h3 class="font-semibold text-green-800 dark:text-green-200 mb-2">
                ✅ Do's
              </h3>
              <ul class="text-green-700 dark:text-green-300 space-y-2 text-sm">
                <li>• Use caching in production environments</li>
                <li>• Keep templates simple and focused</li>
                <li>• Use layouts for consistent structure</li>
                <li>• Sanitize user input in templates</li>
                <li>• Use partials for reusable components</li>
                <li>• Handle errors gracefully in templates</li>
                <li>• Use meaningful variable names</li>
              </ul>
            </div>

            <div
              class="bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4"
            >
              <h3 class="font-semibold text-blue-800 dark:text-blue-200 mb-2">
                💡 Performance Tips
              </h3>
              <ul class="text-blue-700 dark:text-blue-300 space-y-2 text-sm">
                <li>• Enable template caching in production</li>
                <li>• Minimize data passed to templates</li>
                <li>• Use streaming for large templates</li>
                <li>• Precompile templates when possible</li>
                <li>• Optimize database queries</li>
              </ul>
            </div>
          </div>

          <div class="space-y-4">
            <div
              class="bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4"
            >
              <h3 class="font-semibold text-red-800 dark:text-red-200 mb-2">
                ❌ Don'ts
              </h3>
              <ul class="text-red-700 dark:text-red-300 space-y-2 text-sm">
                <li>• Don't put business logic in templates</li>
                <li>• Don't expose sensitive data</li>
                <li>• Don't use blocking operations in helpers</li>
                <li>• Don't create deep nested conditions</li>
                <li>• Don't ignore XSS vulnerabilities</li>
                <li>• Don't hardcode URLs or paths</li>
              </ul>
            </div>

            <div
              class="bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4"
            >
              <h3
                class="font-semibold text-yellow-800 dark:text-yellow-200 mb-2"
              >
                ⚠️ Security Considerations
              </h3>
              <ul
                class="text-yellow-700 dark:text-yellow-300 space-y-2 text-sm"
              >
                <li>• Always escape user input</li>
                <li>• Use HTTPS for sensitive data</li>
                <li>• Validate data before rendering</li>
                <li>• Implement CSP headers</li>
                <li>• Audit template dependencies</li>
              </ul>
            </div>
          </div>
        </div>
      </section>

      <!-- Complete Example -->
      <section class="mb-8">
        <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-4">
          Complete Example
        </h2>

        <div
          class="bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700"
        >
          <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-4">
            Blog Application with EJS
          </h3>

          <div class="space-y-4">
            <div>
              <h4 class="font-medium text-gray-900 dark:text-white mb-2">
                Server Setup (app.js)
              </h4>
              <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4 relative">
                <button
                  class="absolute top-2 right-2 px-3 py-1 bg-blue-500 text-white text-xs rounded hover:bg-blue-600 copy-btn"
                  onclick="copyCode(this)"
                >
                  Copy
                </button>
                <pre><code class="language-javascript">const express = require('express');
const app = express();

// Template engine setup
app.set('view engine', 'ejs');
app.set('views', './views');

// Static files
app.use(express.static('public'));

// Global template variables
app.locals.siteName = 'My Blog';
app.locals.currentYear = new Date().getFullYear();

// Sample data
const posts = [
    {
        id: 1,
        title: 'Getting Started with Express.js',
        content: 'Learn how to build web applications...',
        author: 'John Doe',
        publishedAt: new Date('2024-01-15'),
        tags: ['javascript', 'express', 'nodejs']
    },
    {
        id: 2,
        title: 'Template Engines Explained',
        content: 'Understanding different template engines...',
        author: 'Jane Smith',
        publishedAt: new Date('2024-01-20'),
        tags: ['templates', 'ejs', 'handlebars']
    }
];

// Routes
app.get('/', (req, res) => {
    res.render('index', {
        title: 'Home',
        posts: posts,
        featured: posts[0]
    });
});

app.get('/post/:id', (req, res) => {
    const post = posts.find(p => p.id === parseInt(req.params.id));
    if (!post) {
        return res.status(404).render('404', { title: 'Post Not Found' });
    }
    
    res.render('post', {
        title: post.title,
        post: post,
        relatedPosts: posts.filter(p => p.id !== post.id).slice(0, 2)
    });
});

app.listen(3000, () => {
    console.log('Server running on port 3000');
});</code></pre>
              </div>
            </div>

            <div>
              <h4 class="font-medium text-gray-900 dark:text-white mb-2">
                Layout Template (views/layout.ejs)
              </h4>
              <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4">
                <pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;title&gt;&lt;%= title %&gt; | &lt;%= siteName %&gt;&lt;/title&gt;
    &lt;link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet"&gt;
&lt;/head&gt;
&lt;body class="bg-gray-100"&gt;
    &lt;%- include('partials/header') %&gt;
    
    &lt;main class="container mx-auto px-4 py-8"&gt;
        &lt;%- body %&gt;
    &lt;/main&gt;
    
    &lt;%- include('partials/footer') %&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>

    <script>
      // Tab functionality
      function switchTab(tabName) {
        // Hide all tab contents
        document.querySelectorAll(".template-content").forEach((content) => {
          content.classList.add("hidden");
        });

        // Remove active state from all tabs
        document.querySelectorAll(".template-tab").forEach((tab) => {
          tab.classList.remove(
            "border-blue-500",
            "text-blue-600",
            "dark:text-blue-400"
          );
          tab.classList.add(
            "border-transparent",
            "text-gray-500",
            "hover:text-gray-700",
            "dark:text-gray-400",
            "dark:hover:text-gray-300"
          );
        });

        // Show selected tab content
        document.getElementById(tabName).classList.remove("hidden");

        // Add active state to selected tab
        const activeTab = document.querySelector(`[data-tab="${tabName}"]`);
        activeTab.classList.add(
          "border-blue-500",
          "text-blue-600",
          "dark:text-blue-400"
        );
        activeTab.classList.remove(
          "border-transparent",
          "text-gray-500",
          "hover:text-gray-700",
          "dark:text-gray-400",
          "dark:hover:text-gray-300"
        );
      }

      // Add click handlers to tabs
      document.querySelectorAll(".template-tab").forEach((tab) => {
        tab.addEventListener("click", () => {
          switchTab(tab.dataset.tab);
        });
      });

      // Toggle section functionality
      function toggleSection(sectionId) {
        const content = document.getElementById(`${sectionId}-content`);
        const icon = document.getElementById(`${sectionId}-icon`);

        if (content.classList.contains("hidden")) {
          content.classList.remove("hidden");
          icon.style.transform = "rotate(180deg)";
        } else {
          content.classList.add("hidden");
          icon.style.transform = "rotate(0deg)";
        }
      }

      // Copy functionality
      function copyCode(button) {
        const codeBlock = button.nextElementSibling.querySelector("code");
        const text = codeBlock.textContent;

        navigator.clipboard.writeText(text).then(() => {
          const originalText = button.textContent;
          button.textContent = "Copied!";
          button.classList.add("bg-green-500");
          button.classList.remove("bg-blue-500");

          setTimeout(() => {
            button.textContent = originalText;
            button.classList.remove("bg-green-500");
            button.classList.add("bg-blue-500");
          }, 2000);
        });
      }
    </script>
  </body>
</html>
