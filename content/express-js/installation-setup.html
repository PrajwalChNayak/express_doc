<div class="content-section">
  <h1 class="text-3xl font-bold text-gray-900 dark:text-white mb-6">
    Express.js Installation & Setup
  </h1>

  <div class="prose max-w-none">
    <p class="text-lg text-gray-600 dark:text-gray-300 mb-8">
      Learn how to install Express.js, set up your development environment, and
      create your first Express application with proper configuration and best
      practices.
    </p>

    <div
      class="bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-6 mb-8"
    >
      <h3 class="text-lg font-semibold text-blue-900 dark:text-blue-100 mb-3">
        Prerequisites
      </h3>
      <ul
        class="list-disc list-inside text-blue-800 dark:text-blue-200 space-y-2"
      >
        <li>Node.js (v14 or higher) installed on your system</li>
        <li>npm or yarn package manager</li>
        <li>Basic knowledge of JavaScript and Node.js</li>
        <li>Code editor (VS Code, Sublime Text, etc.)</li>
      </ul>
    </div>

    <h2 class="text-2xl font-bold text-gray-900 dark:text-white mt-8 mb-4">
      Installation Methods
    </h2>

    <div class="tabbed-content mb-6" data-tabbed>
      <div class="tab-buttons flex space-x-2 mb-4">
        <button
          class="tab-button active bg-blue-500 text-white px-4 py-2 rounded"
          data-tab="npm"
        >
          npm
        </button>
        <button
          class="tab-button bg-gray-200 text-gray-700 px-4 py-2 rounded"
          data-tab="yarn"
        >
          Yarn
        </button>
        <button
          class="tab-button bg-gray-200 text-gray-700 px-4 py-2 rounded"
          data-tab="pnpm"
        >
          pnpm
        </button>
      </div>

      <div class="tab-content active" data-content="npm">
        <h4 class="font-semibold text-gray-900 dark:text-white mb-3">
          Using npm
        </h4>

        <div class="code-block mb-4">
          <div class="code-header">
            <span>Install Express.js</span>
            <button class="copy-btn" data-copy="npm-install">Copy</button>
          </div>
          <pre><code id="npm-install"><span class="comment"># Create new project directory</span>
<span class="shell-command">mkdir</span> <span class="variable">my-express-app</span>
<span class="shell-command">cd</span> <span class="variable">my-express-app</span>

<span class="comment"># Initialize npm project</span>
<span class="shell-command">npm init</span> <span class="operator">-y</span>

<span class="comment"># Install Express.js</span>
<span class="shell-command">npm install</span> <span class="variable">express</span>

<span class="comment"># Install development dependencies</span>
<span class="shell-command">npm install</span> <span class="operator">-D</span> <span class="variable">nodemon</span>

<span class="comment"># Verify installation</span>
<span class="shell-command">npm list</span> <span class="variable">express</span></code></pre>
        </div>
      </div>

      <div class="tab-content hidden" data-content="yarn">
        <h4 class="font-semibold text-gray-900 dark:text-white mb-3">
          Using Yarn
        </h4>

        <div class="code-block mb-4">
          <div class="code-header">
            <span>Install Express.js with Yarn</span>
            <button class="copy-btn" data-copy="yarn-install">Copy</button>
          </div>
          <pre><code id="yarn-install"><span class="comment"># Create new project directory</span>
<span class="shell-command">mkdir</span> <span class="variable">my-express-app</span>
<span class="shell-command">cd</span> <span class="variable">my-express-app</span>

<span class="comment"># Initialize yarn project</span>
<span class="shell-command">yarn init</span> <span class="operator">-y</span>

<span class="comment"># Install Express.js</span>
<span class="shell-command">yarn add</span> <span class="variable">express</span>

<span class="comment"># Install development dependencies</span>
<span class="shell-command">yarn add</span> <span class="operator">-D</span> <span class="variable">nodemon</span>

<span class="comment"># Verify installation</span>
<span class="shell-command">yarn list</span> <span class="variable">express</span></code></pre>
        </div>
      </div>

      <div class="tab-content hidden" data-content="pnpm">
        <h4 class="font-semibold text-gray-900 dark:text-white mb-3">
          Using pnpm
        </h4>

        <div class="code-block mb-4">
          <div class="code-header">
            <span>Install Express.js with pnpm</span>
            <button class="copy-btn" data-copy="pnpm-install">Copy</button>
          </div>
          <pre><code id="pnpm-install"><span class="comment"># Create new project directory</span>
<span class="shell-command">mkdir</span> <span class="variable">my-express-app</span>
<span class="shell-command">cd</span> <span class="variable">my-express-app</span>

<span class="comment"># Initialize pnpm project</span>
<span class="shell-command">pnpm init</span>

<span class="comment"># Install Express.js</span>
<span class="shell-command">pnpm add</span> <span class="variable">express</span>

<span class="comment"># Install development dependencies</span>
<span class="shell-command">pnpm add</span> <span class="operator">-D</span> <span class="variable">nodemon</span>

<span class="comment"># Verify installation</span>
<span class="shell-command">pnpm list</span> <span class="variable">express</span></code></pre>
        </div>
      </div>
    </div>

    <h2 class="text-2xl font-bold text-gray-900 dark:text-white mt-8 mb-4">
      Project Setup
    </h2>

    <h3 class="text-xl font-semibold text-gray-900 dark:text-white mt-6 mb-4">
      1. Project Structure
    </h3>

    <div class="code-block mb-6">
      <div class="code-header">
        <span>Create Project Structure</span>
        <button class="copy-btn" data-copy="project-structure">Copy</button>
      </div>
      <pre><code id="project-structure"><span class="comment"># Create directories</span>
<span class="shell-command">mkdir</span> <span class="variable">src routes middleware controllers models utils config tests</span>

<span class="comment"># Create main files</span>
<span class="shell-command">touch</span> <span class="variable">src/app.js src/server.js</span>
<span class="shell-command">touch</span> <span class="variable">.env .env.example .gitignore</span>
<span class="shell-command">touch</span> <span class="variable">README.md</span>

<span class="comment"># Your project structure should look like:</span>
<span class="path">my-express-app/</span>
<span class="operator">‚îú‚îÄ‚îÄ</span> <span class="path">src/</span>
<span class="operator">‚îÇ   ‚îú‚îÄ‚îÄ</span> <span class="variable">app.js</span>           <span class="comment"># Express app configuration</span>
<span class="operator">‚îÇ   ‚îî‚îÄ‚îÄ</span> <span class="variable">server.js</span>        <span class="comment"># Server startup</span>
<span class="operator">‚îú‚îÄ‚îÄ</span> <span class="path">routes/</span>              <span class="comment"># Route definitions</span>
<span class="operator">‚îú‚îÄ‚îÄ</span> <span class="path">middleware/</span>          <span class="comment"># Custom middleware</span>
<span class="operator">‚îú‚îÄ‚îÄ</span> <span class="path">controllers/</span>         <span class="comment"># Route handlers</span>
<span class="operator">‚îú‚îÄ‚îÄ</span> <span class="path">models/</span>             <span class="comment"># Data models</span>
<span class="operator">‚îú‚îÄ‚îÄ</span> <span class="path">utils/</span>              <span class="comment"># Utility functions</span>
<span class="operator">‚îú‚îÄ‚îÄ</span> <span class="path">config/</span>             <span class="comment"># Configuration files</span>
<span class="operator">‚îú‚îÄ‚îÄ</span> <span class="path">tests/</span>              <span class="comment"># Test files</span>
<span class="operator">‚îú‚îÄ‚îÄ</span> <span class="variable">.env</span>                <span class="comment"># Environment variables</span>
<span class="operator">‚îú‚îÄ‚îÄ</span> <span class="variable">.env.example</span>        <span class="comment"># Environment template</span>
<span class="operator">‚îú‚îÄ‚îÄ</span> <span class="variable">.gitignore</span>          <span class="comment"># Git ignore rules</span>
<span class="operator">‚îú‚îÄ‚îÄ</span> <span class="variable">package.json</span>        <span class="comment"># Project dependencies</span>
<span class="operator">‚îî‚îÄ‚îÄ</span> <span class="variable">README.md</span>           <span class="comment"># Project documentation</span></code></pre>
    </div>

    <h3 class="text-xl font-semibold text-gray-900 dark:text-white mt-6 mb-4">
      2. Package.json Configuration
    </h3>

    <div class="code-block mb-6">
      <div class="code-header">
        <span>package.json</span>
        <button class="copy-btn" data-copy="package-json">Copy</button>
      </div>
      <pre><code id="package-json"><span class="operator">{</span>
    <span class="json-key">"name"</span><span class="operator">:</span> <span class="string">"my-express-app"</span><span class="operator">,</span>
    <span class="json-key">"version"</span><span class="operator">:</span> <span class="string">"1.0.0"</span><span class="operator">,</span>
    <span class="json-key">"description"</span><span class="operator">:</span> <span class="string">"Express.js application"</span><span class="operator">,</span>
    <span class="json-key">"main"</span><span class="operator">:</span> <span class="string">"src/server.js"</span><span class="operator">,</span>
    <span class="json-key">"scripts"</span><span class="operator">:</span> <span class="operator">{</span>
        <span class="json-key">"start"</span><span class="operator">:</span> <span class="string">"node src/server.js"</span><span class="operator">,</span>
        <span class="json-key">"dev"</span><span class="operator">:</span> <span class="string">"nodemon src/server.js"</span><span class="operator">,</span>
        <span class="json-key">"test"</span><span class="operator">:</span> <span class="string">"jest"</span><span class="operator">,</span>
        <span class="json-key">"test:watch"</span><span class="operator">:</span> <span class="string">"jest --watch"</span><span class="operator">,</span>
        <span class="json-key">"lint"</span><span class="operator">:</span> <span class="string">"eslint src/"</span><span class="operator">,</span>
        <span class="json-key">"lint:fix"</span><span class="operator">:</span> <span class="string">"eslint src/ --fix"</span>
    <span class="operator">},</span>
    <span class="json-key">"keywords"</span><span class="operator">:</span> <span class="operator">[</span><span class="string">"express"</span><span class="operator">,</span> <span class="string">"node"</span><span class="operator">,</span> <span class="string">"api"</span><span class="operator">],</span>
    <span class="json-key">"author"</span><span class="operator">:</span> <span class="string">"Your Name"</span><span class="operator">,</span>
    <span class="json-key">"license"</span><span class="operator">:</span> <span class="string">"MIT"</span><span class="operator">,</span>
    <span class="json-key">"dependencies"</span><span class="operator">:</span> <span class="operator">{</span>
        <span class="json-key">"express"</span><span class="operator">:</span> <span class="string">"^4.18.2"</span><span class="operator">,</span>
        <span class="json-key">"dotenv"</span><span class="operator">:</span> <span class="string">"^16.3.1"</span>
    <span class="operator">},</span>
    <span class="json-key">"devDependencies"</span><span class="operator">:</span> <span class="operator">{</span>
        <span class="json-key">"nodemon"</span><span class="operator">:</span> <span class="string">"^3.0.1"</span><span class="operator">,</span>
        <span class="json-key">"jest"</span><span class="operator">:</span> <span class="string">"^29.7.0"</span><span class="operator">,</span>
        <span class="json-key">"eslint"</span><span class="operator">:</span> <span class="string">"^8.50.0"</span><span class="operator">,</span>
        <span class="json-key">"supertest"</span><span class="operator">:</span> <span class="string">"^6.3.3"</span>
    <span class="operator">},</span>
    <span class="json-key">"engines"</span><span class="operator">:</span> <span class="operator">{</span>
        <span class="json-key">"node"</span><span class="operator">:</span> <span class="string">">=14.0.0"</span><span class="operator">,</span>
        <span class="json-key">"npm"</span><span class="operator">:</span> <span class="string">">=6.0.0"</span>
    <span class="operator">}</span>
<span class="operator">}</span></code></pre>
    </div>

    <h3 class="text-xl font-semibold text-gray-900 dark:text-white mt-6 mb-4">
      3. Basic Express Application
    </h3>

    <div class="expandable-section mb-6" data-expandable>
      <button
        class="expandable-header bg-gray-100 dark:bg-gray-700 w-full text-left p-4 rounded-lg font-semibold text-gray-900 dark:text-white"
      >
        Create app.js - Application Configuration
        <span class="float-right">+</span>
      </button>
      <div
        class="expandable-content hidden mt-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg"
      >
        <div class="code-block">
          <div class="code-header">
            <span>src/app.js</span>
            <button class="copy-btn" data-copy="app-js">Copy</button>
          </div>
          <pre><code id="app-js"><span class="keyword">const</span> <span class="variable">express</span> <span class="operator">=</span> <span class="function">require</span><span class="operator">(</span><span class="string">'express'</span><span class="operator">);</span>
<span class="keyword">const</span> <span class="variable">path</span> <span class="operator">=</span> <span class="function">require</span><span class="operator">(</span><span class="string">'path'</span><span class="operator">);</span>
<span class="function">require</span><span class="operator">(</span><span class="string">'dotenv'</span><span class="operator">).</span><span class="function">config</span><span class="operator">();</span>

<span class="keyword">const</span> <span class="variable">app</span> <span class="operator">=</span> <span class="function">express</span><span class="operator">();</span>

<span class="comment">// Trust proxy if behind reverse proxy</span>
<span class="variable">app</span><span class="operator">.</span><span class="function">set</span><span class="operator">(</span><span class="string">'trust proxy'</span><span class="operator">,</span> <span class="number">1</span><span class="operator">);</span>

<span class="comment">// View engine setup (optional)</span>
<span class="variable">app</span><span class="operator">.</span><span class="function">set</span><span class="operator">(</span><span class="string">'views'</span><span class="operator">,</span> <span class="variable">path</span><span class="operator">.</span><span class="function">join</span><span class="operator">(</span><span class="variable">__dirname</span><span class="operator">,</span> <span class="string">'../views'</span><span class="operator">));</span>
<span class="variable">app</span><span class="operator">.</span><span class="function">set</span><span class="operator">(</span><span class="string">'view engine'</span><span class="operator">,</span> <span class="string">'ejs'</span><span class="operator">);</span>

<span class="comment">// Middleware for parsing requests</span>
<span class="variable">app</span><span class="operator">.</span><span class="function">use</span><span class="operator">(</span><span class="variable">express</span><span class="operator">.</span><span class="function">json</span><span class="operator">({</span> <span class="variable">limit</span><span class="operator">:</span> <span class="string">'10mb'</span> <span class="operator">}));</span>
<span class="variable">app</span><span class="operator">.</span><span class="function">use</span><span class="operator">(</span><span class="variable">express</span><span class="operator">.</span><span class="function">urlencoded</span><span class="operator">({</span> <span class="variable">extended</span><span class="operator">:</span> <span class="keyword">true</span><span class="operator">,</span> <span class="variable">limit</span><span class="operator">:</span> <span class="string">'10mb'</span> <span class="operator">}));</span>

<span class="comment">// Static files</span>
<span class="variable">app</span><span class="operator">.</span><span class="function">use</span><span class="operator">(</span><span class="variable">express</span><span class="operator">.</span><span class="function">static</span><span class="operator">(</span><span class="variable">path</span><span class="operator">.</span><span class="function">join</span><span class="operator">(</span><span class="variable">__dirname</span><span class="operator">,</span> <span class="string">'../public'</span><span class="operator">)));</span>

<span class="comment">// Custom middleware</span>
<span class="variable">app</span><span class="operator">.</span><span class="function">use</span><span class="operator">((</span><span class="variable">req</span><span class="operator">,</span> <span class="variable">res</span><span class="operator">,</span> <span class="variable">next</span><span class="operator">) => {</span>
    <span class="variable">console</span><span class="operator">.</span><span class="function">log</span><span class="operator">(`${</span><span class="keyword">new</span> <span class="function">Date</span><span class="operator">().</span><span class="function">toISOString</span><span class="operator">()} -</span> <span class="operator">${</span><span class="variable">req</span><span class="operator">.</span><span class="variable">method</span><span class="operator">}</span> <span class="operator">${</span><span class="variable">req</span><span class="operator">.</span><span class="variable">path</span><span class="operator">}`);</span>
    <span class="function">next</span><span class="operator">();</span>
<span class="operator">});</span>

<span class="comment">// Routes</span>
<span class="variable">app</span><span class="operator">.</span><span class="function">get</span><span class="operator">(</span><span class="string">'/'</span><span class="operator">,</span> <span class="operator">(</span><span class="variable">req</span><span class="operator">,</span> <span class="variable">res</span><span class="operator">) => {</span>
    <span class="variable">res</span><span class="operator">.</span><span class="function">json</span><span class="operator">({</span>
        <span class="variable">message</span><span class="operator">:</span> <span class="string">'Welcome to Express.js API!'</span><span class="operator">,</span>
        <span class="variable">version</span><span class="operator">:</span> <span class="string">'1.0.0'</span><span class="operator">,</span>
        <span class="variable">timestamp</span><span class="operator">:</span> <span class="keyword">new</span> <span class="function">Date</span><span class="operator">().</span><span class="function">toISOString</span><span class="operator">(),</span>
        <span class="variable">environment</span><span class="operator">:</span> <span class="variable">process</span><span class="operator">.</span><span class="variable">env</span><span class="operator">.</span><span class="variable">NODE_ENV</span> <span class="operator">||</span> <span class="string">'development'</span>
    <span class="operator">});</span>
<span class="operator">});</span>

<span class="variable">app</span><span class="operator">.</span><span class="function">get</span><span class="operator">(</span><span class="string">'/health'</span><span class="operator">,</span> <span class="operator">(</span><span class="variable">req</span><span class="operator">,</span> <span class="variable">res</span><span class="operator">) => {</span>
    <span class="variable">res</span><span class="operator">.</span><span class="function">status</span><span class="operator">(</span><span class="number">200</span><span class="operator">).</span><span class="function">json</span><span class="operator">({</span>
        <span class="variable">status</span><span class="operator">:</span> <span class="string">'OK'</span><span class="operator">,</span>
        <span class="variable">uptime</span><span class="operator">:</span> <span class="variable">process</span><span class="operator">.</span><span class="function">uptime</span><span class="operator">(),</span>
        <span class="variable">timestamp</span><span class="operator">:</span> <span class="keyword">new</span> <span class="function">Date</span><span class="operator">().</span><span class="function">toISOString</span><span class="operator">()</span>
    <span class="operator">});</span>
<span class="operator">});</span>

<span class="comment">// API routes (to be added later)</span>
<span class="comment">// app.use('/api/users', require('./routes/users'));</span>
<span class="comment">// app.use('/api/auth', require('./routes/auth'));</span>

<span class="comment">// 404 handler</span>
<span class="variable">app</span><span class="operator">.</span><span class="function">use</span><span class="operator">(</span><span class="string">'*'</span><span class="operator">,</span> <span class="operator">(</span><span class="variable">req</span><span class="operator">,</span> <span class="variable">res</span><span class="operator">) => {</span>
    <span class="variable">res</span><span class="operator">.</span><span class="function">status</span><span class="operator">(</span><span class="number">404</span><span class="operator">).</span><span class="function">json</span><span class="operator">({</span>
        <span class="variable">error</span><span class="operator">:</span> <span class="string">'Route not found'</span><span class="operator">,</span>
        <span class="variable">method</span><span class="operator">:</span> <span class="variable">req</span><span class="operator">.</span><span class="variable">method</span><span class="operator">,</span>
        <span class="variable">url</span><span class="operator">:</span> <span class="variable">req</span><span class="operator">.</span><span class="variable">originalUrl</span>
    <span class="operator">});</span>
<span class="operator">});</span>

<span class="comment">// Global error handler</span>
<span class="variable">app</span><span class="operator">.</span><span class="function">use</span><span class="operator">((</span><span class="variable">err</span><span class="operator">,</span> <span class="variable">req</span><span class="operator">,</span> <span class="variable">res</span><span class="operator">,</span> <span class="variable">next</span><span class="operator">) => {</span>
    <span class="variable">console</span><span class="operator">.</span><span class="function">error</span><span class="operator">(</span><span class="string">'Error:'</span><span class="operator">,</span> <span class="variable">err</span><span class="operator">.</span><span class="variable">stack</span><span class="operator">);</span>
    
    <span class="variable">res</span><span class="operator">.</span><span class="function">status</span><span class="operator">(</span><span class="variable">err</span><span class="operator">.</span><span class="variable">status</span> <span class="operator">||</span> <span class="number">500</span><span class="operator">).</span><span class="function">json</span><span class="operator">({</span>
        <span class="variable">error</span><span class="operator">:</span> <span class="variable">process</span><span class="operator">.</span><span class="variable">env</span><span class="operator">.</span><span class="variable">NODE_ENV</span> <span class="operator">===</span> <span class="string">'production'</span> 
            <span class="operator">?</span> <span class="string">'Internal server error'</span> 
            <span class="operator">:</span> <span class="variable">err</span><span class="operator">.</span><span class="variable">message</span><span class="operator">,</span>
        <span class="operator">...(</span><span class="variable">process</span><span class="operator">.</span><span class="variable">env</span><span class="operator">.</span><span class="variable">NODE_ENV</span> <span class="operator">===</span> <span class="string">'development'</span> <span class="operator">&&</span> <span class="operator">{</span> <span class="variable">stack</span><span class="operator">:</span> <span class="variable">err</span><span class="operator">.</span><span class="variable">stack</span> <span class="operator">})</span>
    <span class="operator">});</span>
<span class="operator">});</span>

<span class="variable">module</span><span class="operator">.</span><span class="variable">exports</span> <span class="operator">=</span> <span class="variable">app</span><span class="operator">;</span></code></pre>
        </div>
      </div>
    </div>

    <div class="expandable-section mb-6" data-expandable>
      <button
        class="expandable-header bg-gray-100 dark:bg-gray-700 w-full text-left p-4 rounded-lg font-semibold text-gray-900 dark:text-white"
      >
        Create server.js - Server Startup
        <span class="float-right">+</span>
      </button>
      <div
        class="expandable-content hidden mt-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg"
      >
        <div class="code-block">
          <div class="code-header">
            <span>src/server.js</span>
            <button class="copy-btn" data-copy="server-js">Copy</button>
          </div>
          <pre><code id="server-js"><span class="keyword">const</span> <span class="variable">app</span> <span class="operator">=</span> <span class="function">require</span><span class="operator">(</span><span class="string">'./app'</span><span class="operator">);</span>

<span class="keyword">const</span> <span class="variable">PORT</span> <span class="operator">=</span> <span class="variable">process</span><span class="operator">.</span><span class="variable">env</span><span class="operator">.</span><span class="variable">PORT</span> <span class="operator">||</span> <span class="number">3000</span><span class="operator">;</span>
<span class="keyword">const</span> <span class="variable">HOST</span> <span class="operator">=</span> <span class="variable">process</span><span class="operator">.</span><span class="variable">env</span><span class="operator">.</span><span class="variable">HOST</span> <span class="operator">||</span> <span class="string">'localhost'</span><span class="operator">;</span>

<span class="comment">// Graceful shutdown handler</span>
<span class="keyword">const</span> <span class="function">gracefulShutdown</span> <span class="operator">=</span> <span class="operator">(</span><span class="variable">signal</span><span class="operator">) => {</span>
    <span class="variable">console</span><span class="operator">.</span><span class="function">log</span><span class="operator">(`\nüõë Received</span> <span class="operator">${</span><span class="variable">signal</span><span class="operator">}.</span> <span class="string">Shutting down gracefully...`</span><span class="operator">);</span>
    
    <span class="variable">server</span><span class="operator">.</span><span class="function">close</span><span class="operator">(() => {</span>
        <span class="variable">console</span><span class="operator">.</span><span class="function">log</span><span class="operator">(</span><span class="string">'‚úÖ HTTP server closed.'</span><span class="operator">);</span>
        <span class="variable">process</span><span class="operator">.</span><span class="function">exit</span><span class="operator">(</span><span class="number">0</span><span class="operator">);</span>
    <span class="operator">});</span>
    
    <span class="comment">// Force close after 10 seconds</span>
    <span class="function">setTimeout</span><span class="operator">(() => {</span>
        <span class="variable">console</span><span class="operator">.</span><span class="function">error</span><span class="operator">(</span><span class="string">'‚ùå Could not close connections in time, forcefully shutting down'</span><span class="operator">);</span>
        <span class="variable">process</span><span class="operator">.</span><span class="function">exit</span><span class="operator">(</span><span class="number">1</span><span class="operator">);</span>
    <span class="operator">},</span> <span class="number">10000</span><span class="operator">);</span>
<span class="operator">};</span>

<span class="comment">// Start server</span>
<span class="keyword">const</span> <span class="variable">server</span> <span class="operator">=</span> <span class="variable">app</span><span class="operator">.</span><span class="function">listen</span><span class="operator">(</span><span class="variable">PORT</span><span class="operator">,</span> <span class="variable">HOST</span><span class="operator">,</span> <span class="operator">() => {</span>
    <span class="variable">console</span><span class="operator">.</span><span class="function">log</span><span class="operator">(`üöÄ Server running on http://</span><span class="operator">${</span><span class="variable">HOST</span><span class="operator">}:</span><span class="operator">${</span><span class="variable">PORT</span><span class="operator">}`</span><span class="operator">);</span>
    <span class="variable">console</span><span class="operator">.</span><span class="function">log</span><span class="operator">(`üìä Environment:</span> <span class="operator">${</span><span class="variable">process</span><span class="operator">.</span><span class="variable">env</span><span class="operator">.</span><span class="variable">NODE_ENV</span> <span class="operator">||</span> <span class="string">'development'</span><span class="operator">}`</span><span class="operator">);</span>
    <span class="variable">console</span><span class="operator">.</span><span class="function">log</span><span class="operator">(`üïê Started at:</span> <span class="operator">${</span><span class="keyword">new</span> <span class="function">Date</span><span class="operator">().</span><span class="function">toISOString</span><span class="operator">()}`</span><span class="operator">);</span>
<span class="operator">});</span>

<span class="comment">// Handle unhandled promise rejections</span>
<span class="variable">process</span><span class="operator">.</span><span class="function">on</span><span class="operator">(</span><span class="string">'unhandledRejection'</span><span class="operator">,</span> <span class="operator">(</span><span class="variable">reason</span><span class="operator">,</span> <span class="variable">promise</span><span class="operator">) => {</span>
    <span class="variable">console</span><span class="operator">.</span><span class="function">error</span><span class="operator">(</span><span class="string">'Unhandled Rejection at:'</span><span class="operator">,</span> <span class="variable">promise</span><span class="operator">,</span> <span class="string">'reason:'</span><span class="operator">,</span> <span class="variable">reason</span><span class="operator">);</span>
    <span class="function">gracefulShutdown</span><span class="operator">(</span><span class="string">'UNHANDLED_REJECTION'</span><span class="operator">);</span>
<span class="operator">});</span>

<span class="comment">// Handle uncaught exceptions</span>
<span class="variable">process</span><span class="operator">.</span><span class="function">on</span><span class="operator">(</span><span class="string">'uncaughtException'</span><span class="operator">,</span> <span class="operator">(</span><span class="variable">error</span><span class="operator">) => {</span>
    <span class="variable">console</span><span class="operator">.</span><span class="function">error</span><span class="operator">(</span><span class="string">'Uncaught Exception:'</span><span class="operator">,</span> <span class="variable">error</span><span class="operator">);</span>
    <span class="function">gracefulShutdown</span><span class="operator">(</span><span class="string">'UNCAUGHT_EXCEPTION'</span><span class="operator">);</span>
<span class="operator">});</span>

<span class="comment">// Handle termination signals</span>
<span class="variable">process</span><span class="operator">.</span><span class="function">on</span><span class="operator">(</span><span class="string">'SIGTERM'</span><span class="operator">,</span> <span class="operator">() => </span><span class="function">gracefulShutdown</span><span class="operator">(</span><span class="string">'SIGTERM'</span><span class="operator">));</span>
<span class="variable">process</span><span class="operator">.</span><span class="function">on</span><span class="operator">(</span><span class="string">'SIGINT'</span><span class="operator">,</span> <span class="operator">() => </span><span class="function">gracefulShutdown</span><span class="operator">(</span><span class="string">'SIGINT'</span><span class="operator">));</span>

<span class="variable">module</span><span class="operator">.</span><span class="variable">exports</span> <span class="operator">=</span> <span class="variable">server</span><span class="operator">;</span></code></pre>
        </div>
      </div>
    </div>

    <h3 class="text-xl font-semibold text-gray-900 dark:text-white mt-6 mb-4">
      4. Environment Configuration
    </h3>

    <div class="code-block mb-4">
      <div class="code-header">
        <span>.env.example</span>
        <button class="copy-btn" data-copy="env-example">Copy</button>
      </div>
      <pre><code id="env-example"><span class="comment"># Server Configuration</span>
<span class="env-var">NODE_ENV</span><span class="operator">=</span><span class="variable">development</span>
<span class="env-var">PORT</span><span class="operator">=</span><span class="number">3000</span>
<span class="env-var">HOST</span><span class="operator">=</span><span class="variable">localhost</span>

<span class="comment"># Database</span>
<span class="env-var">DATABASE_URL</span><span class="operator">=</span><span class="url">mongodb://localhost:27017/myapp</span>

<span class="comment"># Authentication</span>
<span class="env-var">JWT_SECRET</span><span class="operator">=</span><span class="string">your-super-secret-jwt-key</span>
<span class="env-var">JWT_EXPIRES_IN</span><span class="operator">=</span><span class="variable">7d</span>

<span class="comment"># Rate Limiting</span>
<span class="env-var">RATE_LIMIT_WINDOW_MS</span><span class="operator">=</span><span class="number">900000</span>
<span class="env-var">RATE_LIMIT_MAX_REQUESTS</span><span class="operator">=</span><span class="number">100</span>

<span class="comment"># CORS</span>
<span class="env-var">ALLOWED_ORIGINS</span><span class="operator">=</span><span class="url">http://localhost:3000,http://localhost:3001</span>

<span class="comment"># Logging</span>
<span class="env-var">LOG_LEVEL</span><span class="operator">=</span><span class="variable">info</span></code></pre>
    </div>

    <div class="code-block mb-6">
      <div class="code-header">
        <span>.gitignore</span>
        <button class="copy-btn" data-copy="gitignore">Copy</button>
      </div>
      <pre><code id="gitignore"># Dependencies
node_modules/
npm-debug.log*
yarn-debug.log*
yarn-error.log*
pnpm-debug.log*

# Environment variables
.env
.env.local
.env.production

# Logs
logs/
*.log

# Runtime data
pids/
*.pid
*.seed
*.pid.lock

# Coverage directory
coverage/
.nyc_output/

# IDE
.vscode/
.idea/
*.swp
*.swo
*~

# OS generated files
.DS_Store
.DS_Store?
._*
.Spotlight-V100
.Trashes
ehthumbs.db
Thumbs.db

# Build output
dist/
build/

# Temporary files
tmp/
temp/</code></pre>
    </div>

    <h2 class="text-2xl font-bold text-gray-900 dark:text-white mt-8 mb-4">
      Testing Your Setup
    </h2>

    <div class="code-block mb-6">
      <div class="code-header">
        <span>Start Development Server</span>
        <button class="copy-btn" data-copy="start-server">Copy</button>
      </div>
      <pre><code id="start-server"># Copy environment variables
cp .env.example .env

# Start development server
npm run dev

# Or start production server
npm start

# Test the API
curl http://localhost:3000
curl http://localhost:3000/health</code></pre>
    </div>

    <h3 class="text-xl font-semibold text-gray-900 dark:text-white mt-6 mb-4">
      Expected Response
    </h3>

    <div class="code-block mb-6">
      <div class="code-header">
        <span>API Response</span>
        <button class="copy-btn" data-copy="api-response">Copy</button>
      </div>
      <pre><code id="api-response"># GET http://localhost:3000
{
    "message": "Welcome to Express.js API!",
    "version": "1.0.0",
    "timestamp": "2023-10-15T10:30:00.000Z",
    "environment": "development"
}

# GET http://localhost:3000/health
{
    "status": "OK",
    "uptime": 42.123,
    "timestamp": "2023-10-15T10:30:00.000Z"
}</code></pre>
    </div>

    <h2 class="text-2xl font-bold text-gray-900 dark:text-white mt-8 mb-4">
      Development Tools Setup
    </h2>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
      <div
        class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6"
      >
        <h4 class="font-semibold text-gray-900 dark:text-white mb-3">
          üîÑ Auto-restart with Nodemon
        </h4>
        <div class="code-block text-sm">
          <pre><code># Install nodemon globally (optional)
npm install -g nodemon

# Or use npx
npx nodemon src/server.js

# Configure nodemon.json
{
    "watch": ["src"],
    "ext": "js,json",
    "ignore": ["tests/"],
    "exec": "node src/server.js"
}</code></pre>
        </div>
      </div>

      <div
        class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6"
      >
        <h4 class="font-semibold text-gray-900 dark:text-white mb-3">
          üêõ Debugging Setup
        </h4>
        <div class="code-block text-sm">
          <pre><code># Debug mode
DEBUG=app:* node src/server.js

# VS Code launch.json
{
    "name": "Debug Express",
    "type": "node",
    "request": "launch",
    "program": "${workspaceFolder}/src/server.js",
    "env": { "NODE_ENV": "development" },
    "restart": true,
    "console": "integratedTerminal"
}</code></pre>
        </div>
      </div>
    </div>

    <h2 class="text-2xl font-bold text-gray-900 dark:text-white mt-8 mb-4">
      Common Installation Issues
    </h2>

    <div class="space-y-4 mb-8">
      <div class="expandable-section" data-expandable>
        <button
          class="expandable-header bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 w-full text-left p-4 rounded-lg font-semibold text-red-900 dark:text-red-100"
        >
          Node.js Version Compatibility
          <span class="float-right">+</span>
        </button>
        <div
          class="expandable-content hidden mt-4 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg"
        >
          <p class="text-red-800 dark:text-red-200 mb-3">
            <strong>Problem:</strong> Express.js requires Node.js v14 or higher.
          </p>
          <div class="code-block">
            <pre><code># Check Node.js version
node --version

# Update Node.js using nvm
nvm install --lts
nvm use --lts

# Or using n (Node.js version manager)
npm install -g n
n latest</code></pre>
          </div>
        </div>
      </div>

      <div class="expandable-section" data-expandable>
        <button
          class="expandable-header bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 w-full text-left p-4 rounded-lg font-semibold text-yellow-900 dark:text-yellow-100"
        >
          Permission Issues
          <span class="float-right">+</span>
        </button>
        <div
          class="expandable-content hidden mt-4 p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg"
        >
          <p class="text-yellow-800 dark:text-yellow-200 mb-3">
            <strong>Problem:</strong> Permission denied when installing packages
            globally.
          </p>
          <div class="code-block">
            <pre><code># Fix npm permissions
npm config set prefix ~/.npm-global
export PATH=~/.npm-global/bin:$PATH

# Or use npx instead of global installs
npx express-generator my-app

# For macOS/Linux with homebrew
brew install node</code></pre>
          </div>
        </div>
      </div>
    </div>

    <div
      class="bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-6 mb-8"
    >
      <h3 class="text-lg font-semibold text-green-900 dark:text-green-100 mb-3">
        ‚úÖ Installation Checklist
      </h3>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <ul
          class="list-disc list-inside text-green-800 dark:text-green-200 space-y-2"
        >
          <li>Node.js v14+ installed</li>
          <li>Express.js package installed</li>
          <li>Project structure created</li>
          <li>Basic app.js and server.js files</li>
        </ul>
        <ul
          class="list-disc list-inside text-green-800 dark:text-green-200 space-y-2"
        >
          <li>Environment variables configured</li>
          <li>Development scripts in package.json</li>
          <li>Nodemon for auto-restart</li>
          <li>Server starts without errors</li>
        </ul>
      </div>
    </div>

    <div
      class="bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-6"
    >
      <h3 class="text-lg font-semibold text-blue-900 dark:text-blue-100 mb-3">
        üéâ Congratulations!
      </h3>
      <p class="text-blue-800 dark:text-blue-200 mb-3">
        You've successfully set up your Express.js development environment. Your
        server should be running and responding to requests.
      </p>
      <p class="text-blue-800 dark:text-blue-200">
        <strong>Next Steps:</strong> Learn about routing, middleware, and
        building your first API endpoints.
      </p>
    </div>
  </div>
</div>
