<div class="content-section">
  <h1 class="text-3xl font-bold text-gray-900 dark:text-white mb-6">
    Server Architecture Patterns
  </h1>

  <div class="prose max-w-none">
    <p class="text-lg text-gray-600 dark:text-gray-300 mb-8">
      Understanding different server architecture patterns is crucial for
      building scalable and maintainable backend applications. Let's explore the
      most common architectural approaches and their trade-offs.
    </p>

    <div
      class="bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-6 mb-8"
    >
      <h3 class="text-lg font-semibold text-blue-900 dark:text-blue-100 mb-3">
        Learning Objectives
      </h3>
      <ul
        class="list-disc list-inside text-blue-800 dark:text-blue-200 space-y-2"
      >
        <li>Understand monolithic vs microservices architectures</li>
        <li>Learn about layered architecture patterns</li>
        <li>Explore event-driven and serverless architectures</li>
        <li>Choose the right architecture for your project</li>
      </ul>
    </div>

    <h2 class="text-2xl font-bold text-gray-900 dark:text-white mt-8 mb-4">
      Monolithic Architecture
    </h2>

    <p class="text-gray-600 dark:text-gray-300 mb-4">
      A monolithic architecture is a traditional approach where all components
      of an application are interconnected and interdependent, deployed as a
      single unit.
    </p>

    <div class="bg-gray-50 dark:bg-gray-800 rounded-lg p-6 mb-6">
      <h4 class="font-semibold text-gray-900 dark:text-white mb-3">
        Advantages:
      </h4>
      <ul
        class="list-disc list-inside text-gray-600 dark:text-gray-300 space-y-1"
      >
        <li>Simple to develop, test, and deploy initially</li>
        <li>Easy debugging and monitoring</li>
        <li>No network latency between components</li>
        <li>ACID transactions across the entire application</li>
      </ul>

      <h4 class="font-semibold text-gray-900 dark:text-white mb-3 mt-4">
        Disadvantages:
      </h4>
      <ul
        class="list-disc list-inside text-gray-600 dark:text-gray-300 space-y-1"
      >
        <li>Difficult to scale individual components</li>
        <li>Technology stack lock-in</li>
        <li>Large codebase becomes hard to maintain</li>
        <li>Single point of failure</li>
      </ul>
    </div>

    <div class="code-block mb-6">
      <div class="code-header">
        <span>Monolithic Express.js Structure</span>
        <button class="copy-btn" data-copy="monolithic-structure">Copy</button>
      </div>
      <pre><code id="monolithic-structure">// Typical monolithic structure
app/
├── controllers/
│   ├── userController.js
│   ├── productController.js
│   └── orderController.js
├── models/
│   ├── User.js
│   ├── Product.js
│   └── Order.js
├── routes/
│   ├── users.js
│   ├── products.js
│   └── orders.js
├── middleware/
├── config/
└── app.js</code></pre>
    </div>

    <h2 class="text-2xl font-bold text-gray-900 dark:text-white mt-8 mb-4">
      Microservices Architecture
    </h2>

    <p class="text-gray-600 dark:text-gray-300 mb-4">
      Microservices architecture breaks down an application into smaller,
      independent services that communicate over well-defined APIs.
    </p>

    <div class="bg-gray-50 dark:bg-gray-800 rounded-lg p-6 mb-6">
      <h4 class="font-semibold text-gray-900 dark:text-white mb-3">
        Advantages:
      </h4>
      <ul
        class="list-disc list-inside text-gray-600 dark:text-gray-300 space-y-1"
      >
        <li>Independent scaling and deployment</li>
        <li>Technology diversity</li>
        <li>Fault isolation</li>
        <li>Team autonomy</li>
      </ul>

      <h4 class="font-semibold text-gray-900 dark:text-white mb-3 mt-4">
        Disadvantages:
      </h4>
      <ul
        class="list-disc list-inside text-gray-600 dark:text-gray-300 space-y-1"
      >
        <li>Increased complexity</li>
        <li>Network latency and failures</li>
        <li>Distributed system challenges</li>
        <li>More operational overhead</li>
      </ul>
    </div>

    <div class="code-block mb-6">
      <div class="code-header">
        <span>Microservices Structure</span>
        <button class="copy-btn" data-copy="microservices-structure">
          Copy
        </button>
      </div>
      <pre><code id="microservices-structure">// Microservices structure
services/
├── user-service/
│   ├── src/
│   ├── package.json
│   └── Dockerfile
├── product-service/
│   ├── src/
│   ├── package.json
│   └── Dockerfile
├── order-service/
│   ├── src/
│   ├── package.json
│   └── Dockerfile
└── api-gateway/
    ├── src/
    ├── package.json
    └── Dockerfile</code></pre>
    </div>

    <h2 class="text-2xl font-bold text-gray-900 dark:text-white mt-8 mb-4">
      Layered Architecture
    </h2>

    <p class="text-gray-600 dark:text-gray-300 mb-4">
      Layered architecture organizes code into horizontal layers, where each
      layer only communicates with the layer directly below it.
    </p>

    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
      <div class="bg-blue-100 dark:bg-blue-900 p-4 rounded-lg text-center">
        <h4 class="font-semibold text-blue-900 dark:text-blue-100">
          Presentation
        </h4>
        <p class="text-sm text-blue-700 dark:text-blue-200">
          Controllers, Routes
        </p>
      </div>
      <div class="bg-green-100 dark:bg-green-900 p-4 rounded-lg text-center">
        <h4 class="font-semibold text-green-900 dark:text-green-100">
          Business
        </h4>
        <p class="text-sm text-green-700 dark:text-green-200">
          Services, Logic
        </p>
      </div>
      <div class="bg-yellow-100 dark:bg-yellow-900 p-4 rounded-lg text-center">
        <h4 class="font-semibold text-yellow-900 dark:text-yellow-100">
          Data Access
        </h4>
        <p class="text-sm text-yellow-700 dark:text-yellow-200">
          Repositories, DAOs
        </p>
      </div>
      <div class="bg-purple-100 dark:bg-purple-900 p-4 rounded-lg text-center">
        <h4 class="font-semibold text-purple-900 dark:text-purple-100">
          Database
        </h4>
        <p class="text-sm text-purple-700 dark:text-purple-200">
          Models, Schemas
        </p>
      </div>
    </div>

    <div class="code-block mb-6">
      <div class="code-header">
        <span>Layered Architecture Example</span>
        <button class="copy-btn" data-copy="layered-example">Copy</button>
      </div>
      <pre><code id="layered-example">// Presentation Layer
class UserController {
    async createUser(req, res) {
        const userData = req.body;
        const user = await userService.createUser(userData);
        res.json(user);
    }
}

// Business Layer
class UserService {
    async createUser(userData) {
        // Business logic and validation
        const validatedData = this.validateUser(userData);
        return await userRepository.create(validatedData);
    }
}

// Data Access Layer
class UserRepository {
    async create(userData) {
        return await User.create(userData);
    }
}</code></pre>
    </div>

    <h2 class="text-2xl font-bold text-gray-900 dark:text-white mt-8 mb-4">
      Event-Driven Architecture
    </h2>

    <p class="text-gray-600 dark:text-gray-300 mb-4">
      Event-driven architecture uses events to trigger and communicate between
      decoupled services.
    </p>

    <div class="expandable-section mb-6" data-expandable>
      <button
        class="expandable-header bg-gray-100 dark:bg-gray-700 w-full text-left p-4 rounded-lg font-semibold text-gray-900 dark:text-white"
      >
        Event-Driven Patterns
        <span class="float-right">+</span>
      </button>
      <div
        class="expandable-content hidden mt-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg"
      >
        <div class="space-y-4">
          <div>
            <h4 class="font-semibold text-gray-900 dark:text-white">
              Event Sourcing
            </h4>
            <p class="text-gray-600 dark:text-gray-300">
              Store all changes as a sequence of events
            </p>
          </div>
          <div>
            <h4 class="font-semibold text-gray-900 dark:text-white">CQRS</h4>
            <p class="text-gray-600 dark:text-gray-300">
              Command Query Responsibility Segregation
            </p>
          </div>
          <div>
            <h4 class="font-semibold text-gray-900 dark:text-white">Pub/Sub</h4>
            <p class="text-gray-600 dark:text-gray-300">
              Publisher-Subscriber messaging pattern
            </p>
          </div>
        </div>
      </div>
    </div>

    <h2 class="text-2xl font-bold text-gray-900 dark:text-white mt-8 mb-4">
      Serverless Architecture
    </h2>

    <p class="text-gray-600 dark:text-gray-300 mb-4">
      Serverless architecture allows you to build and run applications without
      managing servers, with automatic scaling and pay-per-execution pricing.
    </p>

    <div class="tabbed-content mb-6" data-tabbed>
      <div class="tab-buttons flex space-x-2 mb-4">
        <button
          class="tab-button active bg-blue-500 text-white px-4 py-2 rounded"
          data-tab="aws"
        >
          AWS Lambda
        </button>
        <button
          class="tab-button bg-gray-200 text-gray-700 px-4 py-2 rounded"
          data-tab="vercel"
        >
          Vercel
        </button>
        <button
          class="tab-button bg-gray-200 text-gray-700 px-4 py-2 rounded"
          data-tab="netlify"
        >
          Netlify
        </button>
      </div>

      <div class="tab-content active" data-content="aws">
        <div class="code-block">
          <div class="code-header">
            <span>AWS Lambda Function</span>
            <button class="copy-btn" data-copy="aws-lambda">Copy</button>
          </div>
          <pre><code id="aws-lambda">// AWS Lambda handler
exports.handler = async (event) => {
    const { httpMethod, path, body } = event;
    
    if (httpMethod === 'POST' && path === '/users') {
        const userData = JSON.parse(body);
        // Process user creation
        return {
            statusCode: 201,
            body: JSON.stringify({ success: true })
        };
    }
    
    return {
        statusCode: 404,
        body: JSON.stringify({ error: 'Not found' })
    };
};</code></pre>
        </div>
      </div>

      <div class="tab-content hidden" data-content="vercel">
        <div class="code-block">
          <div class="code-header">
            <span>Vercel API Route</span>
            <button class="copy-btn" data-copy="vercel-api">Copy</button>
          </div>
          <pre><code id="vercel-api">// pages/api/users.js
export default function handler(req, res) {
    if (req.method === 'POST') {
        const userData = req.body;
        // Process user creation
        res.status(201).json({ success: true });
    } else {
        res.status(405).json({ error: 'Method not allowed' });
    }
}</code></pre>
        </div>
      </div>

      <div class="tab-content hidden" data-content="netlify">
        <div class="code-block">
          <div class="code-header">
            <span>Netlify Function</span>
            <button class="copy-btn" data-copy="netlify-function">Copy</button>
          </div>
          <pre><code id="netlify-function">// netlify/functions/users.js
exports.handler = async (event, context) => {
    if (event.httpMethod === 'POST') {
        const userData = JSON.parse(event.body);
        // Process user creation
        return {
            statusCode: 201,
            body: JSON.stringify({ success: true })
        };
    }
    
    return {
        statusCode: 405,
        body: JSON.stringify({ error: 'Method not allowed' })
    };
};</code></pre>
        </div>
      </div>
    </div>

    <h2 class="text-2xl font-bold text-gray-900 dark:text-white mt-8 mb-4">
      Choosing the Right Architecture
    </h2>

    <div class="overflow-x-auto mb-6">
      <table
        class="min-w-full bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700"
      >
        <thead class="bg-gray-50 dark:bg-gray-700">
          <tr>
            <th
              class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"
            >
              Factor
            </th>
            <th
              class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"
            >
              Monolithic
            </th>
            <th
              class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"
            >
              Microservices
            </th>
            <th
              class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"
            >
              Serverless
            </th>
          </tr>
        </thead>
        <tbody class="divide-y divide-gray-200 dark:divide-gray-700">
          <tr>
            <td
              class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white"
            >
              Team Size
            </td>
            <td
              class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300"
            >
              Small (1-10)
            </td>
            <td
              class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300"
            >
              Large (10+)
            </td>
            <td
              class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300"
            >
              Any
            </td>
          </tr>
          <tr>
            <td
              class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white"
            >
              Complexity
            </td>
            <td
              class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300"
            >
              Low
            </td>
            <td
              class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300"
            >
              High
            </td>
            <td
              class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300"
            >
              Medium
            </td>
          </tr>
          <tr>
            <td
              class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white"
            >
              Scalability
            </td>
            <td
              class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300"
            >
              Limited
            </td>
            <td
              class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300"
            >
              Excellent
            </td>
            <td
              class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300"
            >
              Automatic
            </td>
          </tr>
          <tr>
            <td
              class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white"
            >
              Cost
            </td>
            <td
              class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300"
            >
              Predictable
            </td>
            <td
              class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300"
            >
              High
            </td>
            <td
              class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300"
            >
              Pay-per-use
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <div
      class="bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-6 mb-8"
    >
      <h3 class="text-lg font-semibold text-green-900 dark:text-green-100 mb-3">
        Best Practices
      </h3>
      <ul
        class="list-disc list-inside text-green-800 dark:text-green-200 space-y-2"
      >
        <li>Start with a monolith and extract microservices as needed</li>
        <li>Use event-driven patterns for loose coupling</li>
        <li>Implement proper monitoring and observability</li>
        <li>Consider data consistency requirements</li>
        <li>Plan for failure and implement circuit breakers</li>
      </ul>
    </div>
  </div>
</div>
